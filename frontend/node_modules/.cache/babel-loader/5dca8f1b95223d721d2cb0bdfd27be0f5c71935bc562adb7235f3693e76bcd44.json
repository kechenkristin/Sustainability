{"ast":null,"code":"var _jsxFileName = \"/Users/arseniikhmara/Documents/selfCode/Sustainability/frontend/src/components/chatAdvices.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport classes from \"./chatAdvices.module.css\";\nimport Advices from \"./advices\";\nimport secret from \"../secrets/gptKey.txt\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatAdvices = () => {\n  _s();\n  let response = 'hello';\n  const [textData, setTextData] = useState('');\n  const [adviceText, setAdviceText] = useState('');\n  const [userInput, setUserInput] = useState(\"\");\n  const fetchAdvice = async () => {\n    const requestBody = {\n      model: \"gpt-3.5-turbo\",\n      messages: [{\n        role: \"user\",\n        content: {\n          userInput\n        }\n      }]\n    };\n    try {\n      const response = await axios.post(\"https://api.openai.com/v1/chat/completions\", requestBody, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${textData}`\n        }\n      });\n      const advice = response.data.choices[0].message.content;\n      setAdviceText(advice);\n    } catch (error) {\n      console.error(\"Error fetching advice:\", error);\n    }\n  };\n  useEffect(() => {\n    fetch(secret).then(response => response.text()).then(data => setTextData(data)).catch(error => console.error('Error fetching text file:', error));\n  }, []);\n  const handleInputChange = event => {\n    setUserInput(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Advices, {\n      response: adviceText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: userInput,\n      onChange: handleInputChange,\n      className: classes.input,\n      placeholder: \"Enter your request\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: classes.button,\n      onClick: fetchAdvice,\n      children: \" Get advice! \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatAdvices, \"mEtdAhjlc8OhAgdfl/Bb80n+SHo=\");\n_c = ChatAdvices;\nexport default ChatAdvices;\nvar _c;\n$RefreshReg$(_c, \"ChatAdvices\");","map":{"version":3,"names":["React","classes","Advices","secret","useState","useEffect","jsxDEV","_jsxDEV","ChatAdvices","_s","response","textData","setTextData","adviceText","setAdviceText","userInput","setUserInput","fetchAdvice","requestBody","model","messages","role","content","axios","post","headers","advice","data","choices","message","error","console","fetch","then","text","catch","handleInputChange","event","target","value","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","className","input","placeholder","button","onClick","_c","$RefreshReg$"],"sources":["/Users/arseniikhmara/Documents/selfCode/Sustainability/frontend/src/components/chatAdvices.js"],"sourcesContent":["import React from \"react\";\n\nimport classes from \"./chatAdvices.module.css\"\nimport Advices from \"./advices\";\nimport secret from \"../secrets/gptKey.txt\";\nimport {useState,useEffect} from \"react\";\n\n\nconst ChatAdvices = () => {\n    let response = 'hello';\n    const [textData, setTextData] = useState('');\n    const [adviceText, setAdviceText] = useState('');\n    const [userInput, setUserInput] = useState(\"\");\n\n\n    const fetchAdvice = async () => {\n        const requestBody = {\n            model: \"gpt-3.5-turbo\",\n            messages: [{ role: \"user\", content: {userInput} }]\n        };\n\n        try {\n            const response = await axios.post(\"https://api.openai.com/v1/chat/completions\", requestBody, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${textData}`\n                }\n            });\n\n            const advice = response.data.choices[0].message.content;\n            setAdviceText(advice);\n        } catch (error) {\n            console.error(\"Error fetching advice:\", error);\n        }\n    };\n\n    useEffect(() => {\n        fetch(secret)\n            .then((response) => response.text())\n            .then((data) => setTextData(data))\n            .catch((error) => console.error('Error fetching text file:', error));\n    }, []);\n\n    const handleInputChange = (event) => {\n        setUserInput(event.target.value);\n    };\n\n    return (\n        <div>\n            <Advices response={adviceText}>\n            </Advices>\n\n            <input\n                type=\"text\"\n                value={userInput}\n                onChange={handleInputChange}\n                className={classes.input}\n                placeholder=\"Enter your request\"\n            />\n\n            <button className={classes.button} onClick={fetchAdvice}> Get advice! </button>\n        </div>\n    )\n}\n\nexport default ChatAdvices;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}