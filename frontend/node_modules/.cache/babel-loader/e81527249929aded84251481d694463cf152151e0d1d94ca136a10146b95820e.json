{"ast":null,"code":"var _jsxFileName = \"/Users/arseniikhmara/Documents/selfCode/Sustainability/frontend/src/components/chatAdvices.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport classes from \"./chatAdvices.module.css\";\nimport Advices from \"./advices\";\nimport secret from \"../secrets/gptKey.txt\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport sendButton from \"../assets/sendIcon.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatAdvices = () => {\n  _s();\n  let response = 'hello';\n  const [textData, setTextData] = useState('');\n  const [adviceText, setAdviceText] = useState('');\n  const [userInput, setUserInput] = useState(\"\");\n  const fetchAdvice = async () => {\n    const requestBody = {\n      model: \"gpt-3.5-turbo\",\n      messages: [{\n        role: \"user\",\n        content: 'Act as a sustainability expert. There is a user that wants to do the action: ' + userInput + \". Write exactly 4 advices how to make that action more sustainable. Make these advices be numbered.\"\n      }]\n    };\n    try {\n      const response = await axios.post(\"https://api.openai.com/v1/chat/completions\", requestBody, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${textData}`\n        }\n      });\n      console.log(\"This is response\");\n      const advice = response.data.choices[0].message.content;\n      setAdviceText(advice);\n    } catch (error) {\n      console.error(\"Error fetching advice:\", error);\n    }\n  };\n  useEffect(() => {\n    fetch(secret).then(response => response.text()).then(data => setTextData(data)).catch(error => console.error('Error fetching text file:', error));\n  }, []);\n  const handleInputChange = event => {\n    setUserInput(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.chatItems,\n    children: [/*#__PURE__*/_jsxDEV(Advices, {\n      response: adviceText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.submit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: userInput,\n        onChange: handleInputChange,\n        className: classes.input,\n        placeholder: \"Enter your request\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: classes.fetchButton,\n        onClick: fetchAdvice,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: sendButton,\n          className: classes.sendButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 79\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatAdvices, \"mEtdAhjlc8OhAgdfl/Bb80n+SHo=\");\n_c = ChatAdvices;\nexport default ChatAdvices;\nvar _c;\n$RefreshReg$(_c, \"ChatAdvices\");","map":{"version":3,"names":["React","classes","Advices","secret","useState","useEffect","axios","sendButton","jsxDEV","_jsxDEV","ChatAdvices","_s","response","textData","setTextData","adviceText","setAdviceText","userInput","setUserInput","fetchAdvice","requestBody","model","messages","role","content","post","headers","console","log","advice","data","choices","message","error","fetch","then","text","catch","handleInputChange","event","target","value","className","chatItems","children","fileName","_jsxFileName","lineNumber","columnNumber","submit","type","onChange","input","placeholder","fetchButton","onClick","src","_c","$RefreshReg$"],"sources":["/Users/arseniikhmara/Documents/selfCode/Sustainability/frontend/src/components/chatAdvices.js"],"sourcesContent":["import React from \"react\";\n\nimport classes from \"./chatAdvices.module.css\"\nimport Advices from \"./advices\";\nimport secret from \"../secrets/gptKey.txt\";\nimport {useState,useEffect} from \"react\";\nimport axios from \"axios\";\n\nimport sendButton from \"../assets/sendIcon.png\";\n\nconst ChatAdvices = () => {\n\n    let response = 'hello';\n    const [textData, setTextData] = useState('');\n    const [adviceText, setAdviceText] = useState('');\n    const [userInput, setUserInput] = useState(\"\");\n\n\n    const fetchAdvice = async () => {\n        const requestBody = {\n            model: \"gpt-3.5-turbo\",\n            messages: [{ role: \"user\", content: 'Act as a sustainability expert. There is a user that wants to do the action: '+userInput +\n            \". Write exactly 4 advices how to make that action more sustainable. Make these advices be numbered.\"}]\n        };\n\n        try {\n            const response = await axios.post(\"https://api.openai.com/v1/chat/completions\", requestBody, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${textData}`\n                }\n            });\n\n            console.log(\"This is response\")\n\n            const advice = response.data.choices[0].message.content;\n            setAdviceText(advice);\n        } catch (error) {\n            console.error(\"Error fetching advice:\", error);\n        }\n    };\n\n    useEffect(() => {\n        fetch(secret)\n            .then((response) => response.text())\n            .then((data) => setTextData(data))\n            .catch((error) => console.error('Error fetching text file:', error));\n    }, []);\n\n    const handleInputChange = (event) => {\n        setUserInput(event.target.value);\n    };\n\n    return (\n        <div className={classes.chatItems}>\n            <Advices response={adviceText}>\n            </Advices>\n\n            <div className={classes.submit}>\n                <input\n                    type=\"text\"\n                    value={userInput}\n                    onChange={handleInputChange}\n                    className={classes.input}\n                    placeholder=\"Enter your request\"\n                />\n                <button className={classes.fetchButton} onClick={fetchAdvice}><img src={sendButton} className={classes.sendButton}/> </button>\n            </div>\n        </div>\n    )\n}\n\nexport default ChatAdvices;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}