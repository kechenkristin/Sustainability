{"ast":null,"code":"var _jsxFileName = \"/Users/arseniikhmara/Documents/selfCode/Sustainability/frontend/src/components/chatAdvices.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport classes from \"./chatAdvices.module.css\";\nimport Advices from \"./advices\";\nimport secret from \"../secrets/gptKey.txt\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatAdvices = () => {\n  _s();\n  let response = 'hello';\n  const [textData, setTextData] = useState('');\n  const [adviceText, setAdviceText] = useState('');\n  const [userInput, setUserInput] = useState(\"\");\n  const fetchAdvice = async () => {\n    const requestBody = {\n      'model': \"gpt-3.5-turbo\",\n      'messages': [{\n        'role': \"user\",\n        'content': {\n          userInput\n        }\n      }]\n    };\n    try {\n      const response = await axios.post(\"https://api.openai.com/v1/chat/completions\", requestBody, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${textData}`\n        }\n      });\n      console.log(response);\n      const advice = response.data.choices[0].message.content;\n      setAdviceText(advice);\n    } catch (error) {\n      console.error(\"Error fetching advice:\", error);\n    }\n  };\n  useEffect(() => {\n    fetch(secret).then(response => response.text()).then(data => setTextData(data)).catch(error => console.error('Error fetching text file:', error));\n  }, []);\n  const handleInputChange = event => {\n    setUserInput(event.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Advices, {\n      response: adviceText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: userInput,\n      onChange: handleInputChange,\n      className: classes.input,\n      placeholder: \"Enter your request\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: classes.button,\n      onClick: fetchAdvice,\n      children: \" Get advice! \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatAdvices, \"mEtdAhjlc8OhAgdfl/Bb80n+SHo=\");\n_c = ChatAdvices;\nexport default ChatAdvices;\nvar _c;\n$RefreshReg$(_c, \"ChatAdvices\");","map":{"version":3,"names":["React","classes","Advices","secret","useState","useEffect","axios","jsxDEV","_jsxDEV","ChatAdvices","_s","response","textData","setTextData","adviceText","setAdviceText","userInput","setUserInput","fetchAdvice","requestBody","post","headers","console","log","advice","data","choices","message","content","error","fetch","then","text","catch","handleInputChange","event","target","value","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","className","input","placeholder","button","onClick","_c","$RefreshReg$"],"sources":["/Users/arseniikhmara/Documents/selfCode/Sustainability/frontend/src/components/chatAdvices.js"],"sourcesContent":["import React from \"react\";\n\nimport classes from \"./chatAdvices.module.css\"\nimport Advices from \"./advices\";\nimport secret from \"../secrets/gptKey.txt\";\nimport {useState,useEffect} from \"react\";\nimport axios from \"axios\";\n\nconst ChatAdvices = () => {\n    let response = 'hello';\n    const [textData, setTextData] = useState('');\n    const [adviceText, setAdviceText] = useState('');\n    const [userInput, setUserInput] = useState(\"\");\n\n\n    const fetchAdvice = async () => {\n        const requestBody = {\n            'model': \"gpt-3.5-turbo\",\n            'messages': [{ 'role': \"user\", 'content': {userInput} }]\n        };\n\n        try {\n            const response = await axios.post(\"https://api.openai.com/v1/chat/completions\", requestBody, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${textData}`\n                }\n            });\n            console.log(response)\n\n            const advice = response.data.choices[0].message.content;\n            setAdviceText(advice);\n        } catch (error) {\n            console.error(\"Error fetching advice:\", error);\n        }\n    };\n\n    useEffect(() => {\n        fetch(secret)\n            .then((response) => response.text())\n            .then((data) => setTextData(data))\n            .catch((error) => console.error('Error fetching text file:', error));\n    }, []);\n\n    const handleInputChange = (event) => {\n        setUserInput(event.target.value);\n    };\n\n    return (\n        <div>\n            <Advices response={adviceText}>\n            </Advices>\n\n            <input\n                type=\"text\"\n                value={userInput}\n                onChange={handleInputChange}\n                className={classes.input}\n                placeholder=\"Enter your request\"\n            />\n\n            <button className={classes.button} onClick={fetchAdvice}> Get advice! </button>\n        </div>\n    )\n}\n\nexport default ChatAdvices;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAOC,OAAO,MAAM,0BAA0B;AAC9C,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,SAAQC,QAAQ,EAACC,SAAS,QAAO,OAAO;AACxC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,IAAIC,QAAQ,GAAG,OAAO;EACtB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACU,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAG9C,MAAMc,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B,MAAMC,WAAW,GAAG;MAChB,OAAO,EAAE,eAAe;MACxB,UAAU,EAAE,CAAC;QAAE,MAAM,EAAE,MAAM;QAAE,SAAS,EAAE;UAACH;QAAS;MAAE,CAAC;IAC3D,CAAC;IAED,IAAI;MACA,MAAML,QAAQ,GAAG,MAAML,KAAK,CAACc,IAAI,CAAC,4CAA4C,EAAED,WAAW,EAAE;QACzFE,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAG,UAAST,QAAS;QACxC;MACJ,CAAC,CAAC;MACFU,OAAO,CAACC,GAAG,CAACZ,QAAQ,CAAC;MAErB,MAAMa,MAAM,GAAGb,QAAQ,CAACc,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,CAACC,OAAO;MACvDb,aAAa,CAACS,MAAM,CAAC;IACzB,CAAC,CAAC,OAAOK,KAAK,EAAE;MACZP,OAAO,CAACO,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAClD;EACJ,CAAC;EAEDxB,SAAS,CAAC,MAAM;IACZyB,KAAK,CAAC3B,MAAM,CAAC,CACR4B,IAAI,CAAEpB,QAAQ,IAAKA,QAAQ,CAACqB,IAAI,EAAE,CAAC,CACnCD,IAAI,CAAEN,IAAI,IAAKZ,WAAW,CAACY,IAAI,CAAC,CAAC,CACjCQ,KAAK,CAAEJ,KAAK,IAAKP,OAAO,CAACO,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC,CAAC;EAC5E,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMK,iBAAiB,GAAIC,KAAK,IAAK;IACjClB,YAAY,CAACkB,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EACpC,CAAC;EAED,oBACI7B,OAAA;IAAA8B,QAAA,gBACI9B,OAAA,CAACN,OAAO;MAACS,QAAQ,EAAEG;IAAW;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACpB,eAEVlC,OAAA;MACImC,IAAI,EAAC,MAAM;MACXN,KAAK,EAAErB,SAAU;MACjB4B,QAAQ,EAAEV,iBAAkB;MAC5BW,SAAS,EAAE5C,OAAO,CAAC6C,KAAM;MACzBC,WAAW,EAAC;IAAoB;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAClC,eAEFlC,OAAA;MAAQqC,SAAS,EAAE5C,OAAO,CAAC+C,MAAO;MAACC,OAAO,EAAE/B,WAAY;MAAAoB,QAAA,EAAC;IAAa;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAS;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAC7E;AAEd,CAAC;AAAAhC,EAAA,CAxDKD,WAAW;AAAAyC,EAAA,GAAXzC,WAAW;AA0DjB,eAAeA,WAAW;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}